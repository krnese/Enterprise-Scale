{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "input": {
      "value": {
        "Name": "Deploy-Diag-LogAnalytics",
        "PolicySetDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
        "Properties": {
          "Description": "This initiative configures application Azure resources to forward diagnostic logs and metrics to an Azure Log Analytics workspace.",
          "DisplayName": "Deploy-Diag-LogAnalytics",
          "Parameters": {
            "logAnalytics": {
              "metadata": {
                "description": "Select the Log Analytics workspace from dropdown list",
                "displayName": "Log Analytics workspace",
                "strongType": "omsWorkspace"
              },
              "type": "String"
            }
          },
          "PolicyDefinitionGroups": null,
          "PolicyDefinitions": [
            {
              "policyDefinitionReferenceId": "15787336925032027248",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NIC",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8614380735855540111",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PowerBIEmbedded",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11893098856976108875",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-StreamAnalytics",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8563885028188224873",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ExpressRoute",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11340829546696757994",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACI",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7369785734785151467",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACR",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7826528036944167632",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VirtualNetwork",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3041321945336827583",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VM",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4799538013900004381",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VMSS",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9721550026187518245",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VNetGW",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "14956529089472820124",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AKS",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11828472723298351362",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Website",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11528012375962045790",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AnalysisService",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7730283833659187776",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridTopic",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "1616430355407435395",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridSub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16434163951922210552",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-HDInsight",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10046947654231879042",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RedisCache",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "12508064384987829465",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Relay",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6119566002967458686",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SignalR",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "17451578841338425833",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TrafficManager",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "857276990946027934",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-WebServerFarm",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10058508349805964764",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLMI",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4578760239133223719",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Firewall",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "12073077635064236216",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataFactory",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "5523041926248835958",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CosmosDB",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "14765267324169841878",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CDNEndpoints",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4003529851943345899",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AA",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7465877406018023964",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PublicIP",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11459688006724582312",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LoadBalancer",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3658009431539758088",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NetworkSecurityGroups",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16711220355141691999",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-KeyVault",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10457959167309675787",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CognitiveServices",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6437229557807613933",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DLAnalytics",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "18008101431671869728",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataLakeStore",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11052009417144695741",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventHub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6021458301571804443",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-iotHub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15574166704461372358",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TimeSeriesInsights",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6932152156106690590",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsWF",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13386987039697312609",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RecoveryVault",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "160095045728966271",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SearchServices",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "916705741428075316",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ServiceBus",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13739460180546043800",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLDBs",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8948406357215944437",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLElasticPools",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11602658861259028340",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-APIMgmt",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "14761162644574671025",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ApplicationGateway",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "1043534232498362278",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Batch",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9662187256634000024",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MySQL",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13045503145960347601",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PostgreSQL",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8897215216292511937",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsISE",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16712534069403244524",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MlWorkspace",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            }
          ]
        },
        "ResourceId": "/providers/Microsoft.Management/managementGroups/prod/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
        "ResourceName": "Deploy-Diag-LogAnalytics",
        "ResourceType": "Microsoft.Authorization/policySetDefinitions",
        "SubscriptionId": null
      }
    }
  }
}
