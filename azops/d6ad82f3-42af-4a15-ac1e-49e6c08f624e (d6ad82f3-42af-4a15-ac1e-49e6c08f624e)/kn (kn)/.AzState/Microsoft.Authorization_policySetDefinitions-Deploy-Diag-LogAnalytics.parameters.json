{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "input": {
      "value": {
        "Name": "Deploy-Diag-LogAnalytics",
        "PolicySetDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
        "Properties": {
          "Description": "This initiative configures application Azure resources to forward diagnostic logs and metrics to an Azure Log Analytics workspace.",
          "DisplayName": "Deploy-Diag-LogAnalytics",
          "Parameters": {
            "logAnalytics": {
              "metadata": {
                "description": "Select the Log Analytics workspace from dropdown list",
                "displayName": "Log Analytics workspace",
                "strongType": "omsWorkspace"
              },
              "type": "String"
            }
          },
          "PolicyDefinitionGroups": null,
          "PolicyDefinitions": [
            {
              "policyDefinitionReferenceId": "7297899767392084844",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NIC",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6044441168706675398",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PowerBIEmbedded",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11765126735096923478",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-StreamAnalytics",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7984412574934583748",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ExpressRoute",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8631308529377429450",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACI",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "17967347935716979021",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACR",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7949229597295138728",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VirtualNetwork",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13409437364788878853",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VM",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8863784055266893448",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VMSS",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9280923188653691925",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VNetGW",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "14841709704065537007",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AKS",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13329284851067392015",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Website",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13066478179466333706",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AnalysisService",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3216377082966239351",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridTopic",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7356214824159385627",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridSub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11831438010100366247",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-HDInsight",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16646419911225648845",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RedisCache",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7475932470601613785",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Relay",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10196513339190032094",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SignalR",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "2753411045651183997",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TrafficManager",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "1373368700933960478",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-WebServerFarm",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "2872313949818917468",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLMI",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6640602486819250765",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Firewall",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "17338261369938226635",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataFactory",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10399848390707038823",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CosmosDB",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11497217280957447298",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CDNEndpoints",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4808575663363404048",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AA",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7840921017591446053",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PublicIP",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16529064641574477562",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LoadBalancer",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11025912923916829686",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NetworkSecurityGroups",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6348128246798091907",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-KeyVault",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9081545539860605061",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CognitiveServices",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "1489634623961659452",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DLAnalytics",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15707163130084583355",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataLakeStore",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "5399681897992686569",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventHub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11696605115748579830",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-iotHub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6354950370109929434",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TimeSeriesInsights",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4605983267782655243",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsWF",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "754716957205418332",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RecoveryVault",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11260944530794907261",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SearchServices",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8893765660153091595",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ServiceBus",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "2980486199932707002",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLDBs",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16064303524502262861",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLElasticPools",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11722248722964049314",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-APIMgmt",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4714436545580536627",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ApplicationGateway",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "5276939950187205821",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Batch",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6811690431433601033",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MySQL",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7774789602795501650",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PostgreSQL",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10237876762047619383",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsISE",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11023268645922689159",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MlWorkspace",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            }
          ]
        },
        "ResourceId": "/providers/Microsoft.Management/managementGroups/kn/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
        "ResourceName": "Deploy-Diag-LogAnalytics",
        "ResourceType": "Microsoft.Authorization/policySetDefinitions",
        "SubscriptionId": null
      }
    }
  }
}
