{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "input": {
      "value": {
        "Name": "Deploy-Diag-LogAnalytics",
        "PolicySetDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
        "Properties": {
          "Description": "This initiative configures application Azure resources to forward diagnostic logs and metrics to an Azure Log Analytics workspace.",
          "DisplayName": "Deploy-Diag-LogAnalytics",
          "Parameters": {
            "logAnalytics": {
              "metadata": {
                "description": "Select the Log Analytics workspace from dropdown list",
                "displayName": "Log Analytics workspace",
                "strongType": "omsWorkspace"
              },
              "type": "String"
            }
          },
          "PolicyDefinitionGroups": null,
          "PolicyDefinitions": [
            {
              "policyDefinitionReferenceId": "12865819659906648402",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NIC",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "18254632598219753398",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PowerBIEmbedded",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15383220908758380509",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-StreamAnalytics",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "14466234611903404404",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ExpressRoute",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16829804755364047338",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACI",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3539983576130885327",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACR",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11412228665556068800",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VirtualNetwork",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3943843600187802185",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VM",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11286455087999919416",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VMSS",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "2580660284117684855",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VNetGW",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15394225251667939770",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AKS",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16784645748820452162",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Website",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15256562586127587427",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AnalysisService",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "17580377077856956279",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridTopic",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10641971782764134304",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridSub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8000495426685623096",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-HDInsight",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15475131440358181811",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RedisCache",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11231973276031867145",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Relay",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10015680780992334393",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SignalR",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "1013040453953711743",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TrafficManager",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3415912055841264717",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-WebServerFarm",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "17407298019919084486",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLMI",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15055461897674073092",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Firewall",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "6898813242918057509",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataFactory",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "2823925084289032626",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CosmosDB",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "5349452188884759408",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CDNEndpoints",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "8246586496168388991",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AA",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3489791821922922080",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PublicIP",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "15397049893758956332",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LoadBalancer",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7686389253922204592",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NetworkSecurityGroups",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9013001612842511829",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-KeyVault",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16609391309093209713",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CognitiveServices",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9530513186712330226",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DLAnalytics",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "18013747479122618796",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataLakeStore",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "16776907299924865180",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventHub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7497192942980179917",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-iotHub",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10749367950592169502",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TimeSeriesInsights",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "13896611849280263902",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsWF",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "9771109359530876365",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RecoveryVault",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "12722265241496419057",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SearchServices",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "4154258726225595969",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ServiceBus",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "10055047326541652589",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLDBs",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "5200960579719921522",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLElasticPools",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11133477271340795124",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-APIMgmt",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "5415629231703865805",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ApplicationGateway",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "2290030802614358034",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Batch",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "17112521955709941826",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MySQL",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "7514350624671079175",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PostgreSQL",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "11082007743671459598",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsISE",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            },
            {
              "policyDefinitionReferenceId": "3329273447976896992",
              "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MlWorkspace",
              "parameters": {
                "logAnalytics": {
                  "value": "[parameters('logAnalytics')]"
                }
              }
            }
          ]
        },
        "ResourceId": "/providers/Microsoft.Management/managementGroups/uri/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
        "ResourceName": "Deploy-Diag-LogAnalytics",
        "ResourceType": "Microsoft.Authorization/policySetDefinitions",
        "SubscriptionId": null
      }
    }
  }
}
